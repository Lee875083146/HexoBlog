---
title: 设计模式——装饰者模式
tags: [设计模式,装饰者模式]
categories:
- 设计模式
- 装饰者模式
date: 2019-10-05 17:04:31
entitle: DesignPattern-Decorator
---

本文介绍装饰者模式。

<!--more-->

## 概念

装饰者模式：动态地给一个对象增加一些额外的职责。


## 结构和工作原理

结构：
* Component：抽象构件
* ConcreteComponent：具体构件
* Decorator：抽象装饰类
* ConcreteDecorator：具体装饰类

一般有两种方式可以给一个类或者对象增加行为：
* 继承机制：通过继承一个现有类可以使得子类在拥有自身方法的同时还能拥有父类的方法。但这种方式是静态的，无法控制增加行为的方式和时机。
* 关联机制：关联将一个类的对象嵌入到另一个对象中，由另一个对象来决定是否调用嵌入对象的行为，以便扩展自己的行为，这个嵌入的对象为装饰器。

关联不会破坏类的封装性，相比继承耦合度降低，同时可以动态扩展，便于维护和扩展。

## 优缺点

### 优点


### 缺点


## 代码示例

```java
public interface RawMaterial {

    BigDecimal costMoney();

}

```

```java

    protected RawMaterial rawMaterial;

    public PancakeRawMaterial(RawMaterial rawMaterial) {
        this.rawMaterial = rawMaterial;
    }

}
```

```java
@Slf4j
public class OriginalPancake implements RawMaterial {

    @Override
    public BigDecimal costMoney() {
        log.info("OriginalPancake- costMoney- $6");
        return BigDecimal.valueOf(6);
    }
}
```

```java
@Slf4j
public class Ham extends PancakeRawMaterial {

    public Ham(RawMaterial rawMaterial) {
        super(rawMaterial);
    }

    @Override
    public BigDecimal costMoney() {
        moreProtein();
        log.info("ADD Ham- costMoney- $3");
        return rawMaterial.costMoney().add(BigDecimal.valueOf(3));
    }

    public void moreProtein() {
        log.info("Ham- moreProtein");
    }
}
```

```java
@Slf4j
public class Lettuce extends PancakeRawMaterial {

    public Lettuce(RawMaterial rawMaterial) {
        super(rawMaterial);
    }

    @Override
    public BigDecimal costMoney() {
        moreHealth();
        log.info("ADD Lettuce- costMoney- $1");
        return rawMaterial.costMoney().add(BigDecimal.valueOf(1));
    }

    public void moreHealth() {
        log.info("Lettuce- moreHealth");
    }

}
```

```java
@Slf4j
public class Client {

    public static void main(String[] args) {
        RawMaterial panCake = new OriginalPancake();
        panCake = new Lettuce(panCake);
        panCake = new Ham(panCake);
        log.info("Client- main- total cost : ${}", panCake.costMoney());
    }

}
```

## 参考资料
<https://design-patterns.readthedocs.io/zh_CN/latest/structural_patterns/decorator.html>
<https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.md#4-%E8%A3%85%E9%A5%B0decorator>
