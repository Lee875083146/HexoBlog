---
title: 微服务设计读书笔记(1)——微服务
entitle: Building-Microservices-Microservices
date: 2019-03-09 21:10:13
tags: [微服务,读书笔记]
categories:
- 读书笔记
- 微服务设计
---
书名：Building Microservices——Sam Newman 崔立强 张骏译
第一章微服务读书笔记

<!--more-->

# 什么是微服务
微服务是一些协同工作的小而自治的服务。
## 很小，专注于做好一件事
在单块系统中，通常创建一些抽象层或者模块来保证代码的内聚性。内聚性是指将相关代码放到一起。SRP（单一职责原则）：把因相同原因而变化的东西聚合到一起，把不同原因而变化的东西分离出来。强调了内聚性的这一概念。微服务将这个概念提升到独立的服务层面。
对于微服务的划分需要权衡的点：服务越小其缺点和有点就越明显。但管理大量的服务就会越复杂。
## 自治性
一个微服务就是一个独立的实体，可以独立地部署在PASS（Platform As A Service）上，也可以作为一个操作系统进程存在。避免部署在同一机器上。
服务之间通过网络调用进行通信。加强服务之间的隔离性，避免紧耦合。
服务可以彼此间独立进行修改，且某一个服务的修改不应该引起该服务消费方的变动。
服务会暴露出API，服务间通过API进行通信。
为了达到解耦的目的，需要正确的建模服务和API。
# 主要好处
## 技术异构性
在一个由多个服务相互协作的系统中，可以在不同服务中使用最适合该服务的技术，如果系统中的某一部分需要做性能提升，可以使用性能更好的技术栈对该部分进行重构。不同部分也可以使用不同的数据存储技术。
## 弹性
微服务能够很好地处理服务不可用和功能降级问题。但需要处理网络问题及机器问题。需要了解出了问题之后应该如何应对。
## 扩展
使用微服务可以只针对需要扩展的服务进行扩展。
## 简易化部署
在微服务中各个服务是单独部署的，可以更快的对特定部分的代码进行部署。如果出现问题可以进行快速回滚。
## 与组织结构相匹配
可以很好地将架构与组织结构相匹配，避免较大的代码库，从而获得理想的团队大小和生产力。
## 可组合性
在微服务架构中，系统会开放很多接口供外部使用，当情况发生改变时，可以使用不同的方式构建应用。
## 对可替代性的优化
微服务可以在需要时轻易地重写服务，或者删除不再使用的服务。
# 面向服务的架构
SOA（Service-Oriented Architecture）面向服务的架构是一种设计方法。其中包含多个服务，二服务之间通过配合最终会提供一系列的功能。
SOA可以用来应对臃肿的单块应用程序，从而提高软件的可重用性。
# 其他分解技术
## 共享库
不同的团队和服务可以通过库的形式共享功能。
缺点：无法选择异构的技术，除非使用动态链接库，否则每次库更新时需要重新部署整个进程。
## 模块
OSGI（Open Source Gateway Initiative）开放服务网关协议，是一个与具体技术相关的模块分解技术。其问题在于非常强调诸如模块生命周期管理之类的事，但语言本身对此并没有足够的支持，迫使对模块进行适当的隔离。其带来的复杂度远远大于其带来的好处。模块会和其他代码进行耦合。
# 没有银弹
微服务是否适合取决于很多因素。
