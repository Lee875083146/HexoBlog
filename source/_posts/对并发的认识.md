---
title: 并发专题——对并发的认识
tags: [并发]
categories:
- 并发
date: 2019-07-29 21:02:31
entitle: Concurrency-Know-About
---
一直以来对Java并发、多线程这一部分的知识都很模糊，前段时间把**Java并发编程的艺术**这本书看了一遍，对Java并发以及带来的问题和解决方法有了新的认识。
写一个系列对Java并发做一个总结和回顾。
<!--more-->
## 并发简史
按照指令执行情况可以将编程模型分为串行编程模型和并行编程模型。在早期的计算机中并没有操作系统，计算机只执行一个程序，对计算机的资源造成了极大的浪费。操作系统应运而生，它使得计算机可以同时运行多个程序，每个程序在单独的进程中运行，操作系统为进程分配各种资源。
串行编程模型的优点在于其直观简单。更符合人类的思维。并行编程模型的优点则在于能充分利用计算机的资源。
随着程序越来越复杂，为了提高进程对资源的利用，线程出现了，线程共享进程的资源，但每个线程都有自己的程序计数器，栈和局部变量等。现代计算机都以线程为基本调度单位，在单核CPU计算机线程以抢占时间片的方式运行，在多核CPU计算机线程可以分配给多个CPU核心抢占时间片运行。

## 多线程的优势
随着单核CPU主频提升越来越困难，主流的芯片制造商开始转为多核CPU的研发制造。多线程可以帮助我们更好的利用多核CPU资源，同时在单核CPU上也可以提高其吞吐量。
使用线程可以将复杂异步的工作流分解为简单且同步的工作流。
使用线程可以简化异步事件。

## 线程带来的风险
### 安全性问题
在没有充分同步的情况下，多线程中的操作执行顺序是不可预测的。
> 在Java中，编译器、处理器（指令、内存）会对指令进行重排序。

### 活跃性问题
当某个操作无法继续执行下去就会发生活跃性。
> 死锁、饥饿、活锁

### 性能问题
合理使用线程可以提升程序的性能，但线程并不是越多越好。
CPU在执行线程切换时，会将正在执行的线程的信息进行保存以便下次能够正常执行，这个过程称为上下文切换，这种操作会带来极大的开销。当线程增多时，CPU的时间将会更多的花在线程调度上，而不是线程运行上。

