---
title: 微服务设计读书笔记——演化式架构师
entitle: Building-Microservices-TheEvolutionaryArchitect
date: 2019-03-16 02:23:29
tags: [微服务设计,微服务,读书笔记,演化式架构师]
categories:
- 读书笔记
- 微服务设计
---
讨论了架构师需要做出的权衡，以及在微服务下具体有哪些方面是我们需要的。
<!--more-->
# 不准确的比较，架构师的演化视角
建筑师和架构师在英文中都为architect，但两者的职业性质却有很大的区别，建筑师的工作是制定详细的计划，让别人去执行，需要对艺术性和工程性进行权衡。与建筑不同，在软件中会面临大量的需求变更，使用的工具和技术也具有多样性，软件是在不断演化的。因此架构师必须改变一开始就要设计出完美产品的想法，相反应该设计出一个合理的框架，并且此框架可以慢慢演化出正确的系统。
与建筑师相比，架构师更类似于城市规划师。只有在很有限的情况下参与到非常具体的细节实现中来。
架构师的职责：
* 愿景：确保在系统级有一个经过充分沟通的技术愿景，这个愿景可以帮助你满客户和组织的需求
* 同理心：理解你所做的决定对客户和同事带来的影响
* 合作：和尽量多的同时进行沟通，从而更好的对愿景进行定义、修订和执行
* 适应性：确保在你的客户和组织需要的时候调整技术愿景
* 自治性： 在标准化和团队自治之间寻找一个正确的平衡点
* 治理：确保系统按照技术愿景的要求实现


# 分区
作为架构师不应该过多关注服务内部的事，而是考虑不同服务之间的交互，保证我们能够对整个系统的健康状态进行监控。
服务之间犯的错会很难纠正。
架构师应该花一定的时间投入到团队开发中，帮助你了解团队在做什么，并有效地和团队进行沟通。


# 一个原则性的方法
基要达到的目标去制定一些原则和实践对做设计来说非常有好处。
## 战略目标
战略目标通常不涉及技术层面，但要确保技术层面的选择要与其一致。
## 原则
原则是为了和更大的目标保持一致制定的一些具体的规则，不是一成不变的。约束是很难或者不可能改变的。应该显示地指出哪些是原则哪些是约束。
## 实践
我们通过实践来保证原则是否能够得到实施，这些实践能够指导我们如何完成任务，通常与技术相关，且偏向比较底层的。包括代码规范、日志数据集中捕获或者HTTP/REST作为标准集成风格。
实践应该巩固原则。
## 将原则和实践相结合
要有重要的原则来指导系统的演化，同时也要有细节来指导如何实现这些原则。


# 要求的标准
清楚地定义出一个好服务应有的属性。
## 监控
能够清晰地描绘出跨服务系统的健康状态。确保所有的服务使用同样的方式报告健康状态及其与监控相关的数据。
## 接口
选用少数几种明确的接口技术有助于新消费者的集成。
## 架构安全性
必须保证每个服务都可以应对下游服务的错误请求。


# 代码治理
## 范例
给出比较好的代码范例。
## 裁剪服务代码模板
给出实现新服务时其核心属性已经实现的代码。
创建服务代码模板不是某个中心化工具的职责，也不是架构团队的职责，而是应该通过合作的方式定义出这些实践。
服务代码应该简化开发人员的工作，而不是使其复杂化。


# 技术债务
理解债务的层次及其对系统的影响。


# 集中治理和领导
> 治理通过评估干系人的需求、当前情况及下一步的可能性来确保企业目标的达成，通过排优先级和做决策来设定方向。对于已经达成一致的方向和目标进行监督。——COBIT5

架构师承担技术治理的职责。治理是一个小组活动，由技术专家领导，有一线人员参与，小组同样负责跟踪和管理技术风险。

# 建设团队
微服务架构中存在多个自治的代码库，每个代码库有自己独立的生命周期，给更多的人提供单独负责单个服务的机会，给予人员足够的锻炼，同时分担职责也能防止某一个人的负担过重。
