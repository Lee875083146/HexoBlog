---
title: 微服务设计读书笔记——如何建模微服务
entitle: Building-Microservices-HowToModelServices
date: 2019-03-19 22:01:08
tags: [微服务设计,微服务,读书笔记,如何建模微服务]
categories:
- 读书笔记
- 微服务设计
---

本章介绍了如何使用领域驱动设计来定义微服务的边界。
<!--more-->

# 什么样的服务才是好服务
专注在松耦合和高内聚两个方面，找到问题域的边界就可以确保相关的行为能放在同一个地方，并且它们会和其他边界以尽量松耦合的形式进行通信。
## 松耦合
如果做到了松耦合，那么修改一个服务就不需要修改另一个服务，使用微服务最重要的一点就是，能够独立修改及部署单个服务而不需要修改系统的其他部分。

## 高内聚
把相关的行为聚集在一起，把不相关的行为放在别处。

# 限界上下文
《领域驱动设计》专注如何对现实世界的领域进行建模，引入了一个重要的概念是限界上下文(bounded contex)，任何一个给定的领域都包含多个限界上下文，每个限界上下文分成两部分，一部分不需要与外部进行通信，另一部分则需要。每个上下文都有明确的接口，该接口决定了会暴露哪些模型给其他的上下文。
限界上下文的一个定义：一个由显式边界限定的特定职责。
## 共享的隐藏模型
同一个模型可能会是多个上下文之间的共享模型，但要明确共享模型存在内部和外部两种表示方式。
## 模块和服务
应该共享特定的模型而不是内部表示，可以避免潜在的紧耦合。
一旦发现了领域内部的限界上下文，一定要使用模块对其进行建模，同时使用共享和隐藏模型。
如果微服务和领域的限界上下文能保持一致，并且微服务可以很好地表示这些限界上下文，则迈出了走向高内聚低耦合的微服务架构的第一步。
## 过早划分
不要过早的划分服务，否则将会导致很多跨服务的修改。

# 业务功能
当思考组织内的限界上下文时，应该从这些上下文能提供的功能来考虑，而不是从共享数据的角度来考虑。
建模服务时，应该将这些功能作为关键操作提供给其他协作者。

# 逐步划分上下文
组织结构和软件架构会相互影响，从而影响上下文的划分，将在第10章详细讨论。

# 关于业务概念的沟通
基于业务领域的软件建模不应该止于限界上下文的概念。以组织内通信相同的方式，来思考微服务之间的通信方式是非常有用的，通信形式在整个组织范围内都非常重要。

# 技术边界
按照技术接缝对服务边界进行建模，不应该成为首要的考虑方式。
